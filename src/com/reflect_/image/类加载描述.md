




## 类加载
### 1 加载阶段
1. JVM在该阶段的主要目的是将字节码从不同的数据源（可能是class文件 、可能是jar包、甚至网络）转化为**<font color="red">二进制字节流加载到内存中</font>，并生成一个代表该类的java.lang.Class对象。
### 2 连接阶段
 2.1 验证

    1. 目的是为了确保Class文件的字节流中包含的信息符合当前虚拟机的要求，并不会危害虚拟机自身的安全.
    2. 包括：文件格式验证（是否以魔数oxcafebabe开头）、元数据验证、字节码验证和符号引用验证。  
    3. 可以考虑使用 -Xverify:none 参数来关闭大部分的类验证措施，缩短虚拟机类加载的时间。
2.2 准备

    1. jvm会在该阶段对静态变量，分配内存并默认初始化（0，null,"",0L,false）

2.3 解析

    1. 虚拟机将常量池内的符号引用替换成直接引用的过程。

### 3 初始化阶段

    1. 到初始化阶段，才真正开始执行类中定义的java程序，次阶段是执行<clinit>()方法的成功。  
    2. <clinit>()方法是由编译器按语句在源文件中出现的顺序，依次自动收集类中的所有**静态变量**的赋值动作和静态代码块中的语句，并进行合并。
    3. 虚拟机会保证一个类<clinit>()方法在多线程环境中被正确地枷锁，同步，如果多个线程同事去初始化一个类，那么只会有一个线程去执行这个类的<clinit>()方法，其他线程都需要阻塞等待，知道活动线程执行<clinit>()方法完毕



## mysql
1. 校对规则： utf8_bin ，区分大小去; utf8_general_ci 不区分大小写,数据库默认设置是utf8_general_ci
```sql
create database test CHARACTER SET  UTF8 COLLATE  utf8_bin;

```
2. 备份和恢复
```sql

/** 备份, 在dos执行命令,这个命令在安装的bin目录**/
-- 注释
mysqldump -u 用户名 -p -B 数据库1 数据库2 数据库n > 文件名.sql

/** 恢复，进入mysql命令行执行 **/
Source 文件名.sql 

```
3. mysql常用类型 
   - varchar(size) 0~65535 可变长度字符串， 最大65535字节。【utf8编码最大是size ：21844= （65535-3）/3 ；gbk：size =（65535-3）/2字符，因为有1-3个字节用于记录字符串大小】
   - char(size) 固定长度字符串，最大255字符.
   - text  size=0~2^16 字节， 更大的还是 mediumtext size= 0~2^24或者longtext  size= 0~2^32，可以替换varchar。这种类型更灵活，更利于空间的利用
4. mysql 修改
```sql
-- 添加一个字段sex 在age字段之后
alter table test1 add sex char (1) not null  default '' after age;
--  查看表结构
desc test1 

alter table test1 modify  username varchar(16) not null  default '';

alter table  test1 drop sex;

rename table  test01 to employee;

alter employee character  set utf8;
-- 修改字段名
alter TABLE employee change `username` `user_name` varchar(32) not null  default '';

```
5. 多表查询 select * from tets01, test02;
- 从第一张表中，取出一行和第二张表的每一行进性租和，返回结果【含有两张表的所有列】n*m
- 一共返回的记录数，第一张表行数 * 第二张表行数
- 这样多表默认处理返回的结果称为笛卡尔集
- 解决这个多表的关键就是要写出正确的过滤条件where 需要分析;
- ```sql 
  -- 特殊写法
  select * from test01, test02 where test01.no= test02.no; 
  select di,name ,grade from test01, test02 where `grade` between `lower` and `higher`;
  -- 与张三同性别和年龄的人
  select di,name  from test01 where (age, sex ) = ( select age, sex from test01 where name = "zhangsan") and name <> "zhangsan";
  -- 比张三都大
  select di,name  from test01 where  age  > all ( select age from test01 where name = "zhangsan");
  --- 比张三都小
  select di,name  from test01 where  age  > any ( select age from test01 where name = "zhangsan")
  
  
  -- 创建表my_test 像test01的表结构
  create table my_test like test01; 
  
  insert into my_test 
         select * from test01;
  
  
  --合并查询，union all 不会去重 ；union 可以自动去重（重复）
  
  -- 复合主键,在定义完字段再设置主键 ,primary key(id,`name`)
  
  
  ```
6. 
7. 等待
